<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tomoshibi - Debug Mode</title>
<style>
    /* åŸºæœ¬è¨­å®š */
    body {
        margin: 0; padding: 0;
        background-color: #000; color: #fff;
        font-family: "Yu Mincho", serif;
        height: 100vh; overflow: hidden;
        display: flex; flex-direction: column;
        justify-content: center; align-items: center;
        text-align: center;
    }

    /* ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ï¼ˆã“ã‚Œã‚’æŠ¼ã›ã°çµ¶å¯¾é³´ã‚‹ã¯ãšï¼‰ */
    #start-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.9);
        display: flex; justify-content: center; align-items: center;
        z-index: 1000;
    }
    #start-btn {
        padding: 1rem 3rem; font-size: 1.5rem;
        background: #e67e22; color: #fff; border: none; border-radius: 50px;
        cursor: pointer; box-shadow: 0 0 20px #e67e22;
    }

    /* è¨ºæ–­ãƒ­ã‚°è¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆã‚¨ãƒ©ãƒ¼åŸå› ã‚’è¡¨ç¤ºï¼‰ */
    #debug-log {
        position: fixed; bottom: 0; left: 0; width: 100%;
        background: rgba(50,50,50,0.8); color: #0f0;
        font-family: monospace; font-size: 12px;
        padding: 10px; text-align: left;
        height: 100px; overflow-y: scroll;
        z-index: 900;
    }

    /* ãƒ¡ã‚¤ãƒ³ç”»é¢ */
    #container { opacity: 0.5; transition: opacity 1s; }
    .active { opacity: 1 !important; }
    
    .visual { font-size: 5rem; margin-bottom: 20px; }
    #message { font-size: 1.2rem; line-height: 2; min-height: 100px; }

</style>
</head>
<body>

    <div id="start-overlay">
        <button id="start-btn">ã“ã“ã‚’æŠ¼ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    </div>

    <div id="container">
        <div id="visual" class="visual">ğŸ”¥</div>
        <div id="message">æº–å‚™ä¸­...</div>
    </div>

    <div id="debug-log">System Ready...<br></div>

    <script>
        // ãƒ­ã‚°ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function log(text) {
            const debug = document.getElementById('debug-log');
            const time = new Date().toLocaleTimeString();
            debug.innerHTML += `[${time}] ${text}<br>`;
            debug.scrollTop = debug.scrollHeight;
        }

        // éŸ³æºè¨­å®šï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åã¯ã“ã“ã§æŒ‡å®šï¼‰
        // â€»ãƒ•ã‚¡ã‚¤ãƒ«åãŒé–“é•ã£ã¦ã„ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„
        const sounds = {
            bonfire: 'bonfire.mp3',
            deepsea: 'deepsea.mp3',
            starry:  'starry.mp3'
        };

        let currentAudio = new Audio();
        
        // æ™‚é–“å¸¯åˆ¤å®š
        const hour = new Date().getHours();
        let mode = 'starry'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
        let soundFile = sounds.starry;

        if (hour >= 6 && hour < 18) {
            mode = 'bonfire'; soundFile = sounds.bonfire;
            document.getElementById('visual').textContent = 'ğŸ”¥';
            document.body.style.background = '#2c1505';
        } else if (hour >= 2 && hour < 6) {
            mode = 'deepsea'; soundFile = sounds.deepsea;
            document.getElementById('visual').textContent = 'ğŸ«§';
            document.body.style.background = '#001';
        } else {
            document.getElementById('visual').textContent = 'âœ¨';
            document.body.style.background = '#0f172a';
        }

        log(`Mode: ${mode}`);
        log(`Target File: ${soundFile}`);

        // ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªæº–å‚™
        currentAudio.src = soundFile;
        currentAudio.loop = true;
        currentAudio.volume = 0.5;

        // ãƒ­ãƒ¼ãƒ‰ç¢ºèª
        currentAudio.addEventListener('canplaythrough', () => {
            log('Audio Loaded OK! (æº–å‚™å®Œäº†)');
        });
        currentAudio.addEventListener('error', (e) => {
            const error = currentAudio.error;
            let errText = "ä¸æ˜ãªã‚¨ãƒ©ãƒ¼";
            if(error.code === 1) errText = "ä¸­æ–­ã•ã‚Œã¾ã—ãŸ";
            if(error.code === 2) errText = "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼";
            if(error.code === 3) errText = "ãƒ‡ã‚³ãƒ¼ãƒ‰å¤±æ•—(ãƒ•ã‚¡ã‚¤ãƒ«ç ´æ?)";
            if(error.code === 4) errText = "404 Not Found (ãƒ•ã‚¡ã‚¤ãƒ«ãªã—)";
            
            log(`âŒ ERROR: éŸ³æºèª­ã¿è¾¼ã¿å¤±æ•— - ${errText}`);
            log(`ãƒ•ã‚¡ã‚¤ãƒ«åã€Œ${soundFile}ã€ãŒãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„`);
        });

        // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
        document.getElementById('start-btn').addEventListener('click', () => {
            log('ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
            
            // å†ç”Ÿè©¦è¡Œ
            currentAudio.play()
                .then(() => {
                    log('ğŸµ å†ç”ŸæˆåŠŸï¼éŸ³ãŒé³´ã£ã¦ã„ã‚‹ã¯ãšã§ã™');
                    document.getElementById('start-overlay').style.display = 'none';
                    document.getElementById('container').classList.add('active');
                    document.getElementById('message').textContent = "ç”»é¢ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨è¨€è‘‰ãŒå‡ºã¾ã™";
                })
                .catch(e => {
                    log(`âŒ å†ç”Ÿã‚¨ãƒ©ãƒ¼: ${e.message}`);
                    log('ã‚¹ãƒãƒ›ã®ãƒãƒŠãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„');
                    alert("å†ç”Ÿã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ç”»é¢ä¸‹ã®ãƒ­ã‚°ã‚’è¦‹ã¦ãã ã•ã„ã€‚");
                });
        });

        // ç”»é¢ã‚¿ãƒƒãƒ—ã§è¨€è‘‰ï¼ˆç°¡æ˜“ç‰ˆï¼‰
        const words = ["ãŠç–²ã‚Œæ§˜ã§ã™", "ã‚ˆãé ‘å¼µã‚Šã¾ã—ãŸ", "æ·±å‘¼å¸ã—ã¾ã—ã‚‡ã†"];
        document.body.addEventListener('click', () => {
            if(document.getElementById('start-overlay').style.display === 'none'){
                document.getElementById('message').textContent = words[Math.floor(Math.random()*words.length)];
            }
        });

    </script>
</body>
</html>
